---
import Layout from "../layouts/Layout.astro";
---

<Layout pageTitle="Contact Us - OfficeTwo">
  <section class="bg-dark-blue min-h-[603px] pt-24 px-6 md:px-10 flex items-center justify-center">
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col md:flex-row max-w-6xl w-full">
      <img
        src="/bacontactphoto.jpg"
        alt="Buenos Aires photo"
        class="w-full md:w-1/2 h-64 md:h-auto object-cover"
      />
      <div class="w-full md:w-1/2 flex flex-col justify-center p-4 md:p-10">
        <h1 class="text-2xl md:text-3xl font-semibold text-dark-blue mb-6">Contact Us</h1>
        <form id="contact-form" class="space-y-4">
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
            <input
              required
              type="text"
              id="name"
              name="name"
              placeholder="John Doe"
              class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dark-blue"
            />
          </div>
          <div>
            <label for="company" class="block text-sm font-medium text-gray-700">Company</label>
            <input
              required
              type="text"
              id="company"
              name="company"
              placeholder="Office Two"
              class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dark-blue"
            />
          </div>
          <div>
            <label for="industry" class="block text-sm font-medium text-gray-700">Industry</label>
            <select
              id="industry"
              name="industry"
              class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-dark-blue"
            >
              <option disabled selected value="">Select your industry</option>
              <option>Technology</option>
              <option>Marketing</option>
              <option>Finance</option>
              <option>Healthcare</option>
              <option>Education</option>
              <option>Other</option>
            </select>
          </div>
          <div>
            <label for="employees" class="block text-sm font-medium text-gray-700">Team Size</label>
            <select
              id="employees"
              name="employees"
              class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-dark-blue"
            >
              <option disabled selected value="">Select number of employees</option>
              <option>1–5</option>
              <option>6–10</option>
              <option>11–25</option>
              <option>More than 25</option>
            </select>
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
            <input
              required
              type="email"
              id="email"
              name="email"
              placeholder="contact@officetwo.com"
              class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dark-blue"
            />
          </div>
          <div>
            <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
            <input
              required
              type="text"
              id="message"
              name="message"
              placeholder="How can we improve your team?"
              class="mt-1 w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-dark-blue"
            />
          </div>
          <input class="bg-gold p-2 rounded-lg hover:bg-dark-blue hover:text-white transition duration-100" type="submit" value="Submit">
        </form>
      </div>
    </div>
  </section>

  <script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("contact-form");
  
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
  
        try {
          const formData = new FormData(form);
          const data = Object.fromEntries(formData.entries());
  
          const response = await fetch("/api/leads", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });
  
          if (!response.ok) {
            console.error("Error en la respuesta del servidor:", response.statusText);
            return;
          }
  
          // ✅ Redirección a página de agradecimiento
          window.location.href = "/thanks";
        } catch (err) {
          console.error("Error de red o inesperado:", err);
        }
      });
    });
  </script>  
</Layout>
